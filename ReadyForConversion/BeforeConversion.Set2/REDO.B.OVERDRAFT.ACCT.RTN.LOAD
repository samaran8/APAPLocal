*-----------------------------------------------------------------------------
* <Rating>-20</Rating>
*-----------------------------------------------------------------------------
    SUBROUTINE REDO.B.OVERDRAFT.ACCT.RTN.LOAD
*********************************************************************************************************
* Company Name : ASOCIACION POPULAR DE AHORROS Y PRESTAMOS
* Dev By       : V.P.Ashokkumar
*********************************************************************************************************

    $INCLUDE T24.BP I_COMMON
    $INCLUDE T24.BP I_EQUATE
    $INCLUDE T24.BP I_ENQUIRY.COMMON
    $INCLUDE T24.BP I_F.CUSTOMER
    $INCLUDE T24.BP I_F.ACCOUNT
    $INCLUDE T24.BP I_F.CATEGORY
    $INCLUDE T24.BP I_F.LIMIT
    $INCLUDE T24.BP I_F.ACCOUNT.CLASS
    $INCLUDE T24.BP I_F.DATES
    $INCLUDE LAPAP.BP I_REDO.B.OVERDRAFT.ACCT.RTN.COMMON

    GOSUB INITIALISE
    GOSUB OPENFILES
    RETURN

INITIALISE:
***********
    FN.CUSTOMER = 'F.CUSTOMER'; F.CUSTOMER = ''
    FN.ACCOUNT = 'F.ACCOUNT';  F.ACCOUNT =  ''
    FN.CATEGORY = 'F.CATEGORY';  F.CATEGORY = ''
    FN.LIMIT =  'F.LIMIT';   F.LIMIT =  ''
    FN.ACCOUNT.CLASS = 'F.ACCOUNT.CLASS'; F.ACCOUNT.CLASS = ''
    FN.DR.OPER.OVERDRAF.WORKFILE = 'F.DR.OPER.OVERDRAF.WORKFILE'; F.DR.OPER.OVERDRAF.WORKFILE = ''
    FN.LATAM.CARD.CUSTOMER = 'F.LATAM.CARD.CUSTOMER'; F.LATAM.CARD.CUSTOMER = ''
    Y.CO.CODE = '';  Y.ACCOUNT.OFFICER = ''; Y.CUSTOMER=''; Y.OPENING.DATE = ''
    Y.CUSTOMER = ''; Y.CARD.ISSUE.ID = ''; Y.LOCKED.AMOUNT = ''; Y.LOCKED.AMOUNT  = ''
    Y.AVAILABLE.BALANCE = ''; Y.IN.TRANSIT.BALANCE = '' ;Y.ONLINE.CLEARED.BAL = ''

    LREF.POS    = ''; L.AC.STATUS1.POS = ''; L.AC.STATUS2.POS = ''; L.AC.AV.BAL.POS = ''
    LREF.APP    = 'ACCOUNT'
    LREF.FIELDS = 'L.AC.STATUS1':VM:'L.AC.STATUS2':VM:'L.AC.AV.BAL'
    CALL MULTI.GET.LOC.REF(LREF.APP,LREF.FIELDS,LREF.POS)
    L.AC.STATUS1.POS = LREF.POS<1,1>
    L.AC.STATUS2.POS = LREF.POS<1,2>
    L.AC.AV.BAL.POS = LREF.POS<1,3>
    RETURN

OPENFILES:
**********
    CALL OPF(FN.CUSTOMER,F.CUSTOMER)
    CALL OPF(FN.ACCOUNT,F.ACCOUNT)
    CALL OPF(FN.CATEGORY,F.CATEGORY)
    CALL OPF(FN.LIMIT,F.LIMIT)
    CALL OPF(FN.ACCOUNT.CLASS,F.ACCOUNT.CLASS)
    CALL OPF(FN.DR.OPER.OVERDRAF.WORKFILE,F.DR.OPER.OVERDRAF.WORKFILE)
    CALL OPF(FN.LATAM.CARD.CUSTOMER,F.LATAM.CARD.CUSTOMER)
    RETURN

END
